"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{522:function(e,t,n){n.r(t),n.d(t,{ResultsContainer:function(){return g}});var l=n(7437),r=n(2265);n(6911);var a=n(5225),s=n(5634);n(8701);var o=n(5276),i=n(3378),c=n(2703);function u(e){let{value:t,onChange:n,min:a,max:s,label:o}=e,[i,c]=(0,r.useState)(String(t));(0,r.useEffect)(()=>{c(String(t))},[t]);let u=(0,r.useCallback)(e=>{let t=e.target.value;c(t);let l=parseInt(t,10);!isNaN(l)&&l>=a&&l<=s&&n(l)},[n,a,s]),d=(0,r.useCallback)(()=>{let e=parseInt(i,10);isNaN(e)||e<a?(c(String(a)),n(a)):e>s&&(c(String(s)),n(s))},[i,a,s,n]);return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{className:"text-xs text-muted-foreground",children:o}),(0,l.jsx)("input",{type:"number",value:i,onChange:u,onBlur:d,min:a,max:s,className:"w-full rounded-md border bg-background px-2 py-1.5 text-center text-sm font-mono tabular-nums focus:outline-none focus:ring-1 focus:ring-ring"})]})}function d(e){let{hex:t,rgb:n,hsl:a,onHexChange:s,onRgbChange:o,onHslChange:i,className:d}=e,[h,x]=(0,r.useState)("hex"),[m,f]=(0,r.useState)(t);(0,r.useEffect)(()=>{f(t)},[t]);let g=(0,r.useCallback)(e=>{let t=e.target.value;t.startsWith("#")||(t="#"+t),f(t),/^#[0-9A-Fa-f]{6}$/.test(t)&&s(t.toLowerCase())},[s]),b=(0,r.useCallback)(()=>{let e=m.replace(/[^0-9A-Fa-f#]/g,"");e.startsWith("#")||(e="#"+e),e.length<7&&(e=e.padEnd(7,"0")),f(e=e.slice(0,7).toLowerCase()),s(e)},[m,s]);return(0,l.jsxs)("div",{className:(0,c.cn)("space-y-3",d),children:[(0,l.jsx)("div",{className:"flex gap-1",role:"tablist","aria-label":"Color input format",children:[{key:"hex",label:"Hex"},{key:"rgb",label:"RGB"},{key:"hsl",label:"HSL"}].map(e=>(0,l.jsx)("button",{type:"button",role:"tab","aria-selected":h===e.key,"aria-controls":"color-input-".concat(e.key),onClick:()=>x(e.key),className:(0,c.cn)("flex-1 rounded-md px-2 py-1 text-xs transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",h===e.key?"bg-foreground text-background":"bg-muted hover:bg-muted/80"),children:e.label},e.key))}),"hex"===h&&(0,l.jsxs)("div",{id:"color-input-hex",role:"tabpanel",className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{htmlFor:"hex-input",className:"text-xs text-muted-foreground",children:"Hex"}),(0,l.jsx)("input",{id:"hex-input",type:"text",value:m,onChange:g,onBlur:b,maxLength:7,className:"w-full rounded-md border bg-background px-3 py-1.5 text-center font-mono text-sm focus:outline-none focus:ring-1 focus:ring-ring",placeholder:"#000000"})]}),"rgb"===h&&(0,l.jsxs)("div",{id:"color-input-rgb",role:"tabpanel",className:"grid grid-cols-3 gap-2",children:[(0,l.jsx)(u,{value:n.r,onChange:e=>o({...n,r:e}),min:0,max:255,label:"R"}),(0,l.jsx)(u,{value:n.g,onChange:e=>o({...n,g:e}),min:0,max:255,label:"G"}),(0,l.jsx)(u,{value:n.b,onChange:e=>o({...n,b:e}),min:0,max:255,label:"B"})]}),"hsl"===h&&(0,l.jsxs)("div",{id:"color-input-hsl",role:"tabpanel",className:"grid grid-cols-3 gap-2",children:[(0,l.jsx)(u,{value:a.h,onChange:e=>i({...a,h:e}),min:0,max:360,label:"H"}),(0,l.jsx)(u,{value:a.s,onChange:e=>i({...a,s:e}),min:0,max:100,label:"S"}),(0,l.jsx)(u,{value:a.l,onChange:e=>i({...a,l:e}),min:0,max:100,label:"L"})]})]})}function h(e){let{onDrag:t,onDragEnd:n}=e,l=(0,r.useRef)(!1),a=(0,r.useRef)(null),s=(0,r.useCallback)((e,n)=>{if(!a.current)return;let l=a.current.getBoundingClientRect(),r=Math.max(0,Math.min(1,(e-l.left)/l.width)),s=Math.max(0,Math.min(1,(n-l.top)/l.height));t(r,s)},[t]),o=(0,r.useCallback)(e=>{e.preventDefault(),l.current=!0,s(e.clientX,e.clientY)},[s]),i=(0,r.useCallback)(e=>{l.current=!0;let t=e.touches[0];s(t.clientX,t.clientY)},[s]);return(0,r.useEffect)(()=>{let e=e=>{l.current&&(e.preventDefault(),s(e.clientX,e.clientY))},t=e=>{if(!l.current)return;let t=e.touches[0];s(t.clientX,t.clientY)},r=()=>{l.current&&(l.current=!1,null==n||n())};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),document.addEventListener("touchmove",t,{passive:!0}),document.addEventListener("touchend",r),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r)}},[s,n]),{containerRef:a,handleMouseDown:o,handleTouchStart:i}}function x(e){let{hue:t,onChange:n,className:a}=e,s=(0,r.useCallback)(e=>{n(Math.round(360*e))},[n]),{containerRef:o,handleMouseDown:i,handleTouchStart:u}=h({onDrag:s}),d=(0,r.useCallback)(e=>{let l=e.shiftKey?30:5,r=t;switch(e.key){case"ArrowLeft":r=(t-l+360)%360;break;case"ArrowRight":r=(t+l)%360;break;case"Home":r=0;break;case"End":r=359;break;default:return}e.preventDefault(),n(r)},[t,n]),x=t/360*100;return(0,l.jsx)("div",{ref:o,role:"slider","aria-label":"Hue","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":t,"aria-valuetext":"".concat(t," degrees"),tabIndex:0,onMouseDown:i,onTouchStart:u,onKeyDown:d,className:(0,c.cn)("relative h-4 w-full cursor-pointer overflow-hidden rounded-full","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),style:{background:"linear-gradient(to right,\n					hsl(0, 100%, 50%),\n					hsl(60, 100%, 50%),\n					hsl(120, 100%, 50%),\n					hsl(180, 100%, 50%),\n					hsl(240, 100%, 50%),\n					hsl(300, 100%, 50%),\n					hsl(360, 100%, 50%)\n				)"},children:(0,l.jsx)("div",{className:"pointer-events-none absolute top-1/2 h-5 w-3 -translate-x-1/2 -translate-y-1/2 rounded-sm border-2 border-white shadow-[0_0_0_1px_rgba(0,0,0,0.3)]",style:{left:"".concat(x,"%"),backgroundColor:"hsl(".concat(t,", 100%, 50%)")}})})}function m(e){let{hue:t,saturation:n,lightness:a,onChange:s,className:o}=e,i=(0,r.useCallback)((e,t)=>{s(Math.round(100*e),Math.round((1-t)*100))},[s]),{containerRef:u,handleMouseDown:d,handleTouchStart:x}=h({onDrag:i}),m=(0,r.useCallback)(e=>{let t=e.shiftKey?10:2,l=n,r=a;switch(e.key){case"ArrowLeft":l=Math.max(0,n-t);break;case"ArrowRight":l=Math.min(100,n+t);break;case"ArrowUp":r=Math.min(100,a+t);break;case"ArrowDown":r=Math.max(0,a-t);break;default:return}e.preventDefault(),s(l,r)},[n,a,s]),f=100-a;return(0,l.jsx)("div",{ref:u,role:"application","aria-label":"Color saturation and lightness picker. Saturation: ".concat(n,"%, Lightness: ").concat(a,"%"),tabIndex:0,onMouseDown:d,onTouchStart:x,onKeyDown:m,className:(0,c.cn)("relative h-48 w-full cursor-crosshair overflow-hidden rounded-lg","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),style:{background:"\n					linear-gradient(to top, #000, transparent),\n					linear-gradient(to right, #fff, transparent),\n					hsl(".concat(t,", 100%, 50%)\n				")},children:(0,l.jsx)("div",{className:"pointer-events-none absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-[0_0_0_1px_rgba(0,0,0,0.3)]",style:{left:"".concat(n,"%"),top:"".concat(f,"%")}})})}function f(e){let{value:t,onChange:n,className:a}=e,s=(0,r.useMemo)(()=>{let e=(0,o.oo)(t);return null!=e?e:{r:0,g:0,b:0}},[t]),i=(0,r.useMemo)(()=>(0,o.lC)(s),[s]),u=(0,r.useCallback)((e,t)=>{let l={h:i.h,s:e,l:t},r=(0,o.ve)(l);n((0,o.vq)(r))},[i.h,n]),h=(0,r.useCallback)(e=>{let t={h:e,s:i.s,l:i.l},l=(0,o.ve)(t);n((0,o.vq)(l))},[i.s,i.l,n]),f=(0,r.useCallback)(e=>{n(e)},[n]),g=(0,r.useCallback)(e=>{n((0,o.vq)(e))},[n]),b=(0,r.useCallback)(e=>{let t=(0,o.ve)(e);n((0,o.vq)(t))},[n]);return(0,l.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-4 w-full max-w-xs",a),children:[(0,l.jsx)(m,{hue:i.h,saturation:i.s,lightness:i.l,onChange:u}),(0,l.jsx)(x,{hue:i.h,onChange:h}),(0,l.jsx)(d,{hex:t,rgb:s,hsl:i,onHexChange:f,onRgbChange:g,onHslChange:b})]})}function g(e){let{trainingData:t,preset:n,onReset:c,onRetrain:u,onSave:d,isSaved:h=!1,loadedModelJson:x,onViewSaved:m,isDemo:g=!1}=e,{isTraining:b,isTrained:v,error:p,train:k,predict:j,exportModel:N,importModel:C}=function(){let e=(0,r.useRef)(null),[t,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),u=(0,r.useCallback)(async(t,l)=>{if(0===t.length){c("No training data provided");return}n(!0),c(null);try{let n=new s.NeuralNetwork,r=a.e[l].iterations;await new Promise((l,a)=>{setTimeout(()=>{try{n.train(t,{iterations:r,errorThresh:.005,log:!1}),e.current=n,o(!0),l()}catch(e){a(e)}},10)})}catch(t){let e=t instanceof Error?t.message:"Training failed";c(e),o(!1)}finally{n(!1)}},[]),d=(0,r.useCallback)(t=>{if(!e.current||!l)return null;try{var n,r;let l=e.current.run(t),a=null!==(n=l.dark)&&void 0!==n?n:0,s=null!==(r=l.light)&&void 0!==r?r:0;return{prediction:a>s?"dark":"light",confidence:Math.round(100*Math.max(a,s)),raw:{dark:a,light:s}}}catch(e){return null}},[l]),h=(0,r.useCallback)(()=>{e.current=null,o(!1),c(null)},[]),x=(0,r.useCallback)(()=>e.current&&l?e.current.toJSON():null,[l]),m=(0,r.useCallback)(t=>{try{let n=new s.NeuralNetwork;return n.fromJSON(t),e.current=n,o(!0),c(null),!0}catch(e){return c("Failed to import model"),!1}},[]);return{isTraining:t,isTrained:l,error:i,train:u,predict:d,reset:h,exportModel:x,importModel:m}}(),[w,y]=(0,r.useState)("#3498db"),[S,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(x)try{let e=JSON.parse(x);C(e)}catch(e){k(t,n)}else k(t,n)},[k,t,n,x,C]),(0,r.useEffect)(()=>{if(!v){M(null);return}let e=(0,o.ZJ)(w);if(!e){M(null);return}let t=j(e);t&&M({result:t.prediction,confidence:t.confidence})},[w,v,j]);let E=(0,r.useCallback)(e=>{y(e)},[]),L=(0,r.useCallback)(()=>{if(!d||!v)return;let e=N();e&&d(JSON.stringify(e))},[d,v,N]),T=(null==S?void 0:S.result)==="dark"?"#ffffff":"#000000";return b?(0,l.jsxs)("div",{className:"flex min-h-full flex-col items-center justify-center gap-4 p-4",children:[(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-muted border-t-foreground"}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:["Training with ",t.length," examples..."]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.e[n].label," mode (",a.e[n].iterations," iterations)"]})]}):p?(0,l.jsxs)("div",{className:"flex min-h-full flex-col items-center justify-center gap-4 p-4",children:[(0,l.jsxs)("p",{className:"text-destructive",children:["Training failed: ",p]}),(0,l.jsx)(i.z,{onClick:u,children:"Try Again"})]}):(0,l.jsxs)("div",{className:"flex min-h-full flex-col",children:[(0,l.jsx)("div",{className:"border-b",children:(0,l.jsx)("div",{className:"container flex items-center justify-between py-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"font-semibold",children:g?"Demo Mode":"Model Trained"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:g?"Pre-trained model \xb7 Train your own for custom results":"".concat(t.length," examples \xb7 ").concat(a.e[n].label," mode")})]})})}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-8 p-4",children:[(0,l.jsx)("div",{className:"flex h-48 w-full max-w-md items-center justify-center rounded-xl border-2 text-2xl font-semibold transition-colors",style:{backgroundColor:w,color:T,borderColor:S?"transparent":void 0},children:S?(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{children:"Sample Text"}),(0,l.jsx)("div",{className:"mt-2 text-sm font-normal opacity-80",children:"The quick brown fox jumps over the lazy dog"})]}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"Pick a color below"})}),S&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsxs)("p",{className:"text-lg",children:["dark"===S.result?"White":"Black"," ","text recommended"]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-1.5 w-24 overflow-hidden rounded-full bg-muted",children:(0,l.jsx)("div",{className:"h-full rounded-full bg-foreground transition-all duration-300",style:{width:"".concat(S.confidence,"%")}})}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:[S.confidence,"% confidence"]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)("label",{className:"text-sm text-muted-foreground",children:"Test a background color"}),(0,l.jsx)(f,{value:w,onChange:E})]})]}),h&&(0,l.jsxs)("div",{className:"border-t bg-muted/50 px-4 py-2 text-center text-sm text-muted-foreground",children:["Model saved to browser storage. You can access it from"," ",m?(0,l.jsx)("button",{onClick:m,className:"underline hover:text-foreground",children:"Saved Models"}):"Saved Models"," ","on your next visit."]}),(0,l.jsx)("div",{className:"border-t bg-background/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"container flex items-center justify-between py-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.z,{variant:"ghost",onClick:c,children:"Start Over"}),m&&(0,l.jsx)(i.z,{variant:"ghost",onClick:m,children:"Saved Models"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[d&&!x&&!g&&(0,l.jsx)(i.z,{variant:"outline",onClick:L,disabled:h||!v,children:h?"Saved":"Save Model"}),(0,l.jsx)(i.z,{variant:"outline",onClick:u,children:g?"Train Your Own":x?"Train New":"Train Again"})]})]})})]})}}}]);