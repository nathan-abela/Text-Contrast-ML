"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{522:function(e,t,l){l.r(t),l.d(t,{ResultsContainer:function(){return g}});var r=l(7437),n=l(2265);l(6911);var a=l(5225),s=l(5634);l(8701);var o=l(5276),i=l(3378),c=l(2703);function u(e){let{value:t,onChange:l,min:a,max:s,label:o}=e,[i,c]=(0,n.useState)(String(t));(0,n.useEffect)(()=>{c(String(t))},[t]);let u=(0,n.useCallback)(e=>{let t=e.target.value;c(t);let r=parseInt(t,10);!isNaN(r)&&r>=a&&r<=s&&l(r)},[l,a,s]),d=(0,n.useCallback)(()=>{let e=parseInt(i,10);isNaN(e)||e<a?(c(String(a)),l(a)):e>s&&(c(String(s)),l(s))},[i,a,s,l]);return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{className:"text-xs text-muted-foreground",children:o}),(0,r.jsx)("input",{type:"number",value:i,onChange:u,onBlur:d,min:a,max:s,className:"w-full rounded-md border bg-background px-2 py-1.5 text-center text-sm tabular-nums focus:outline-none focus:ring-1 focus:ring-ring"})]})}function d(e){let{hex:t,rgb:l,hsl:a,onHexChange:s,onRgbChange:o,onHslChange:i,className:d}=e,[h,m]=(0,n.useState)("hex"),[x,f]=(0,n.useState)(t);(0,n.useEffect)(()=>{f(t)},[t]);let g=(0,n.useCallback)(e=>{let t=e.target.value;t.startsWith("#")||(t="#"+t),f(t),/^#[0-9A-Fa-f]{6}$/.test(t)&&s(t.toLowerCase())},[s]),b=(0,n.useCallback)(()=>{let e=x.replace(/[^0-9A-Fa-f#]/g,"");e.startsWith("#")||(e="#"+e),e.length<7&&(e=e.padEnd(7,"0")),f(e=e.slice(0,7).toLowerCase()),s(e)},[x,s]);return(0,r.jsxs)("div",{className:(0,c.cn)("space-y-3",d),children:[(0,r.jsx)("div",{className:"flex gap-1",role:"tablist","aria-label":"Color input format",children:[{key:"hex",label:"Hex"},{key:"rgb",label:"RGB"},{key:"hsl",label:"HSL"}].map(e=>(0,r.jsx)("button",{type:"button",role:"tab","aria-selected":h===e.key,"aria-controls":"color-input-".concat(e.key),onClick:()=>m(e.key),className:(0,c.cn)("flex-1 rounded-md px-2 py-1 text-xs transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",h===e.key?"bg-foreground text-background":"bg-muted hover:bg-muted/80"),children:e.label},e.key))}),"hex"===h&&(0,r.jsxs)("div",{id:"color-input-hex",role:"tabpanel",className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{htmlFor:"hex-input",className:"text-xs text-muted-foreground",children:"Hex"}),(0,r.jsx)("input",{id:"hex-input",type:"text",value:x,onChange:g,onBlur:b,maxLength:7,className:"w-full rounded-md border bg-background px-3 py-1.5 text-center text-sm focus:outline-none focus:ring-1 focus:ring-ring",placeholder:"#000000"})]}),"rgb"===h&&(0,r.jsxs)("div",{id:"color-input-rgb",role:"tabpanel",className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)(u,{value:l.r,onChange:e=>o({...l,r:e}),min:0,max:255,label:"R"}),(0,r.jsx)(u,{value:l.g,onChange:e=>o({...l,g:e}),min:0,max:255,label:"G"}),(0,r.jsx)(u,{value:l.b,onChange:e=>o({...l,b:e}),min:0,max:255,label:"B"})]}),"hsl"===h&&(0,r.jsxs)("div",{id:"color-input-hsl",role:"tabpanel",className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)(u,{value:a.h,onChange:e=>i({...a,h:e}),min:0,max:360,label:"H"}),(0,r.jsx)(u,{value:a.s,onChange:e=>i({...a,s:e}),min:0,max:100,label:"S"}),(0,r.jsx)(u,{value:a.l,onChange:e=>i({...a,l:e}),min:0,max:100,label:"L"})]})]})}function h(e){let{onDrag:t,onDragEnd:l}=e,r=(0,n.useRef)(!1),a=(0,n.useRef)(null),s=(0,n.useCallback)((e,l)=>{if(!a.current)return;let r=a.current.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e-r.left)/r.width)),s=Math.max(0,Math.min(1,(l-r.top)/r.height));t(n,s)},[t]),o=(0,n.useCallback)(e=>{e.preventDefault(),r.current=!0,s(e.clientX,e.clientY)},[s]),i=(0,n.useCallback)(e=>{r.current=!0;let t=e.touches[0];s(t.clientX,t.clientY)},[s]);return(0,n.useEffect)(()=>{let e=e=>{r.current&&(e.preventDefault(),s(e.clientX,e.clientY))},t=e=>{if(!r.current)return;let t=e.touches[0];s(t.clientX,t.clientY)},n=()=>{r.current&&(r.current=!1,null==l||l())};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),document.addEventListener("touchmove",t,{passive:!0}),document.addEventListener("touchend",n),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}},[s,l]),{containerRef:a,handleMouseDown:o,handleTouchStart:i}}function m(e){let{hue:t,onChange:l,className:a}=e,s=(0,n.useCallback)(e=>{l(Math.round(360*e))},[l]),{containerRef:o,handleMouseDown:i,handleTouchStart:u}=h({onDrag:s}),d=(0,n.useCallback)(e=>{let r=e.shiftKey?30:5,n=t;switch(e.key){case"ArrowLeft":n=(t-r+360)%360;break;case"ArrowRight":n=(t+r)%360;break;case"Home":n=0;break;case"End":n=359;break;default:return}e.preventDefault(),l(n)},[t,l]),m=t/360*100;return(0,r.jsx)("div",{ref:o,role:"slider","aria-label":"Hue","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":t,"aria-valuetext":"".concat(t," degrees"),tabIndex:0,onMouseDown:i,onTouchStart:u,onKeyDown:d,className:(0,c.cn)("relative h-4 w-full cursor-pointer overflow-hidden rounded-full","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),style:{background:"linear-gradient(to right,\n					hsl(0, 100%, 50%),\n					hsl(60, 100%, 50%),\n					hsl(120, 100%, 50%),\n					hsl(180, 100%, 50%),\n					hsl(240, 100%, 50%),\n					hsl(300, 100%, 50%),\n					hsl(360, 100%, 50%)\n				)"},children:(0,r.jsx)("div",{className:"pointer-events-none absolute top-1/2 h-5 w-3 -translate-x-1/2 -translate-y-1/2 rounded-sm border-2 border-white shadow-[0_0_0_1px_rgba(0,0,0,0.3)]",style:{left:"".concat(m,"%"),backgroundColor:"hsl(".concat(t,", 100%, 50%)")}})})}function x(e){let{hue:t,saturation:l,value:a,onChange:s,className:o}=e,i=(0,n.useCallback)((e,t)=>{s(Math.round(100*e),Math.round((1-t)*100))},[s]),{containerRef:u,handleMouseDown:d,handleTouchStart:m}=h({onDrag:i}),x=(0,n.useCallback)(e=>{let t=e.shiftKey?10:2,r=l,n=a;switch(e.key){case"ArrowLeft":r=Math.max(0,l-t);break;case"ArrowRight":r=Math.min(100,l+t);break;case"ArrowUp":n=Math.min(100,a+t);break;case"ArrowDown":n=Math.max(0,a-t);break;default:return}e.preventDefault(),s(r,n)},[l,a,s]),f=100-a;return(0,r.jsx)("div",{ref:u,role:"application","aria-label":"Color saturation and brightness picker. Saturation: ".concat(l,"%, Brightness: ").concat(a,"%"),tabIndex:0,onMouseDown:d,onTouchStart:m,onKeyDown:x,className:(0,c.cn)("relative h-48 w-full cursor-crosshair overflow-hidden rounded-lg","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),style:{background:"\n					linear-gradient(to top, #000, transparent),\n					linear-gradient(to right, #fff, transparent),\n					hsl(".concat(t,", 100%, 50%)\n				")},children:(0,r.jsx)("div",{className:"pointer-events-none absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-[0_0_0_1px_rgba(0,0,0,0.3)]",style:{left:"".concat(l,"%"),top:"".concat(f,"%")}})})}function f(e){let{value:t,onChange:l,className:a}=e,s=(0,n.useMemo)(()=>{let e=(0,o.oo)(t);return null!=e?e:{r:0,g:0,b:0}},[t]),i=(0,n.useMemo)(()=>(0,o.lC)(s),[s]),u=(0,n.useMemo)(()=>(0,o.py)(s),[s]),h=(0,n.useCallback)((e,t)=>{let r={h:u.h,s:e,v:t},n=(0,o.WE)(r);l((0,o.vq)(n))},[u.h,l]),f=(0,n.useCallback)(e=>{let t={h:e,s:u.s,v:u.v},r=(0,o.WE)(t);l((0,o.vq)(r))},[u.s,u.v,l]),g=(0,n.useCallback)(e=>{l(e)},[l]),b=(0,n.useCallback)(e=>{l((0,o.vq)(e))},[l]),v=(0,n.useCallback)(e=>{let t=(0,o.ve)(e);l((0,o.vq)(t))},[l]);return(0,r.jsxs)("div",{className:(0,c.cn)("flex w-56 flex-col gap-4",a),children:[(0,r.jsx)(x,{hue:u.h,saturation:u.s,value:u.v,onChange:h}),(0,r.jsx)(m,{hue:u.h,onChange:f}),(0,r.jsx)(d,{hex:t,rgb:s,hsl:i,onHexChange:g,onRgbChange:b,onHslChange:v})]})}function g(e){let{trainingData:t,preset:l,onReset:c,onRetrain:u,onSave:d,isSaved:h=!1,loadedModelJson:m,onViewSaved:x,isDemo:g=!1}=e,{isTraining:b,isTrained:v,error:p,trainingResult:k,train:j,predict:y,exportModel:N,importModel:w}=function(){let e=(0,n.useRef)(null),[t,l]=(0,n.useState)(!1),[r,o]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),h=(0,n.useCallback)(async(t,r)=>{if(0===t.length){c("No training data provided");return}l(!0),c(null);try{let l=new s.NeuralNetwork,n=a.e[r].iterations;await new Promise((r,a)=>{setTimeout(()=>{try{let a=l.train(t,{iterations:n,errorThresh:.005,log:!1});e.current=l;let s=a.error,i=t.length,c="poor";s<.01&&i>=15?c="great":s<.05&&i>=10?c="good":s<.15&&i>=5&&(c="fair"),d({loss:s,quality:c}),o(!0),r()}catch(e){a(e)}},10)})}catch(t){let e=t instanceof Error?t.message:"Training failed";c(e),o(!1)}finally{l(!1)}},[]),m=(0,n.useCallback)(t=>{if(!e.current||!r)return null;try{var l,n;let r=e.current.run(t),a=null!==(l=r.dark)&&void 0!==l?l:0,s=null!==(n=r.light)&&void 0!==n?n:0;return{prediction:a>s?"dark":"light",raw:{dark:a,light:s}}}catch(e){return null}},[r]),x=(0,n.useCallback)(()=>{e.current=null,o(!1),c(null),d(null)},[]),f=(0,n.useCallback)(()=>e.current&&r?e.current.toJSON():null,[r]),g=(0,n.useCallback)(t=>{try{let l=new s.NeuralNetwork;return l.fromJSON(t),e.current=l,o(!0),c(null),!0}catch(e){return c("Failed to import model"),!1}},[]);return{isTraining:t,isTrained:r,error:i,trainingResult:u,train:h,predict:m,reset:x,exportModel:f,importModel:g}}(),[C,S]=(0,n.useState)("#3498db"),[M,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(m)try{let e=JSON.parse(m);w(e)}catch(e){j(t,l)}else j(t,l)},[j,t,l,m,w]),(0,n.useEffect)(()=>{if(!v){E(null);return}let e=(0,o.ZJ)(C);if(!e){E(null);return}let t=y(e);t&&E({result:t.prediction})},[C,v,y]);let T=(0,n.useCallback)(e=>{S(e)},[]),L=(0,n.useCallback)(()=>{if(!d||!v)return;let e=N();e&&d(JSON.stringify(e))},[d,v,N]),q=(null==M?void 0:M.result)==="dark"?"#ffffff":"#000000";return b?(0,r.jsxs)("div",{className:"flex min-h-full flex-col items-center justify-center gap-4 p-4",children:[(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-muted border-t-foreground"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Training with ",t.length," examples..."]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.e[l].label," mode (",a.e[l].iterations," iterations)"]})]}):p?(0,r.jsxs)("div",{className:"flex min-h-full flex-col items-center justify-center gap-4 p-4",children:[(0,r.jsxs)("p",{className:"text-destructive",children:["Training failed: ",p]}),(0,r.jsx)(i.z,{onClick:u,children:"Try Again"})]}):(0,r.jsxs)("div",{className:"flex min-h-full flex-col",children:[(0,r.jsx)("div",{className:"border-b",children:(0,r.jsx)("div",{className:"container flex items-center justify-between py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-semibold",children:g?"Demo Mode":"Model Trained"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:g?"Pre-trained model \xb7 Train your own for custom results":"".concat(t.length," examples \xb7 ").concat(a.e[l].label," mode")})]})})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-4 p-4 sm:justify-center sm:gap-8",children:[(0,r.jsx)("div",{className:"flex h-40 w-full max-w-md items-center justify-center rounded-xl border-2 text-xl font-semibold transition-colors sm:h-48 sm:text-2xl lg:h-56 lg:max-w-lg",style:{backgroundColor:C,color:q,borderColor:M?"transparent":void 0},children:M?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{children:"Sample Text"}),(0,r.jsx)("div",{className:"mt-2 text-sm font-normal opacity-80",children:"The quick brown fox jumps over the lazy dog"})]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"Pick a color below"})}),M&&(0,r.jsxs)("p",{className:"hidden text-lg sm:block",children:["dark"===M.result?"White":"Black"," text recommended"]}),k&&!g&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full ".concat("great"===k.quality?"bg-green-500":"good"===k.quality?"bg-green-500":"fair"===k.quality?"bg-yellow-500":"bg-red-500")}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["great"===k.quality?"Excellent fit":"good"===k.quality?"Good fit":"fair"===k.quality?"Fair fit":"Poor fit",(0,r.jsxs)("span",{className:"hidden sm:inline",children:[" \xb7 ","poor"===k.quality?"Try adding more varied examples":"fair"===k.quality?"More examples could improve results":"Model learned your preferences well"]})]})]}),(0,r.jsx)("hr",{className:"hidden w-full max-w-xs border-border sm:block"}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:gap-4",children:[(0,r.jsx)("label",{className:"hidden text-sm text-muted-foreground sm:block",children:"Test a background color"}),(0,r.jsx)(f,{value:C,onChange:T})]})]}),h&&(0,r.jsxs)("div",{className:"border-t bg-muted/50 px-4 py-2 text-center text-sm text-muted-foreground",children:["Model saved to browser storage. You can access it from"," ",x?(0,r.jsx)("button",{onClick:x,className:"underline hover:text-foreground",children:"Saved Models"}):"Saved Models"," ","on your next visit."]}),(0,r.jsx)("div",{className:"border-t bg-background/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"container flex items-center justify-between py-2 sm:py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.z,{variant:"ghost",onClick:c,children:"Start Over"}),x&&(0,r.jsx)(i.z,{variant:"ghost",onClick:x,children:"Saved Models"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[d&&!m&&!g&&(0,r.jsx)(i.z,{variant:"outline",onClick:L,disabled:h||!v,children:h?"Saved":"Save Model"}),(0,r.jsx)(i.z,{variant:"outline",onClick:u,children:g?"Train Your Own":m?"Train New":"Train Again"})]})]})})]})}}}]);